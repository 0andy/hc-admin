<div class="padding-bottom-45">
  <div class="modal-header">
    <div class="modal-title">{{title}}</div>
  </div>
  <form nz-form [formGroup]="form" #validateForm="ngForm" class="ant-advanced-search-form" (ngSubmit)="save()"
    *ngIf="supplier">
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col class="labelPadding" [nzSm]="8" nzRequired [nzXs]="24">供应商名称
          </nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <input nz-input formControlName="name" placeholder="请输入供应商名称" [(ngModel)]="supplier.name" />
            <nz-form-explain *ngIf="(form.get('name')?.dirty && form.get('name')?.errors)
      ">产品名称不能为空且不能超过100个字符
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="8" class="labelPadding" [nzXs]="24">邮编</nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <input nz-input formControlName="zipCode" placeholder="请输入邮编" [(ngModel)]="supplier.zipCode" />
            <nz-form-explain *ngIf="(form.get('zipCode')?.dirty && form.get('zipCode')?.errors)
        ">请输入正确的邮箱
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="8" class="labelPadding" [nzXs]="24">电话</nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <input nz-input formControlName="tel" placeholder="请输入电话" [(ngModel)]="supplier.tel" />
            <nz-form-explain *ngIf="(form.get('tel')?.dirty && form.get('tel')?.errors)
        ">请输入正确的电话号码
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="8" class="labelPadding" [nzXs]="24">联系人</nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <input nz-input formControlName="contact" placeholder="请输入联系人" [(ngModel)]="supplier.contact" />
            <nz-form-explain *ngIf="(form.get('contact')?.dirty && form.get('contact')?.errors)
          ">联系人不能超过50个字符
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="8" class="labelPadding" [nzXs]="24">联系人职位</nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <input nz-input formControlName="position" placeholder="请输入联系人职位" [(ngModel)]="supplier.position" />
            <nz-form-explain *ngIf="(form.get('position')?.dirty && form.get('position')?.errors)
          ">联系人职位不能超过25个字符
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="8" class="labelPadding" [nzXs]="24">联系人电话</nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <input nz-input formControlName="phone" placeholder="请输入联系人电话" [(ngModel)]="supplier.phone" />
            <nz-form-explain *ngIf="(form.get('phone')?.dirty && form.get('phone')?.errors)
            ">请输入正确的手机号
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="8" class="labelPadding" [nzXs]="24">供应商地址</nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <textarea nz-input rows="3" formControlName="address" placeholder="请输入供应商地址"
              [(ngModel)]="supplier.address"></textarea>
            <nz-form-explain *ngIf="(form.get('address')?.dirty && form.get('address')?.errors)
          ">供应商地址不能超过250个字符
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="12">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="8" class="labelPadding" [nzXs]="24">描述</nz-form-label>
          <nz-form-control [nzSm]="16" class="controlPadding" nzHasFeedback>
            <textarea nz-input rows="3" formControlName="desc" placeholder="请输入描述"
              [(ngModel)]="supplier.desc"></textarea>
            <nz-form-explain *ngIf="(form.get('desc')?.dirty && form.get('desc')?.errors)
            ">描述不能超过250个字符
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="24">
        <nz-form-item nzFlex>
          <nz-form-label nz-col [nzSm]="3" class="remarkLabelPadding" [nzXs]="24">备注</nz-form-label>
          <nz-form-control [nzSm]="21" class="remarkcontrolPadding" nzHasFeedback>
            <textarea nz-input rows="2" formControlName="remark" placeholder="请输入备注"
              [(ngModel)]="supplier.remark"></textarea>
            <nz-form-explain *ngIf="(form.get('remark')?.dirty && form.get('remark')?.errors)
          ">备注不能超过250个字符
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="24">
        <div>
          <nz-upload style="float:right;" [nzDisabled]="uploadDisabled" nzAction="{{postUrl | hostUrl}}"
            [nzShowUploadList]="false" (nzChange)="handleChange($event)" [nzBeforeUpload]="beforeUpload">
            <div nz-button nzType="default" nzType="primary" style="padding-top: 5px">
              <i nz-icon type="upload" class="anticon anticon-upload"></i><span>上传文件</span>
            </div>
          </nz-upload>
          <p style="float:left;margin-top: 5px;color:red" *ngIf="uploadDisabled==true">附件数量大于6不能继续上传</p>
        </div>
        <nz-list style="margin-top: 40px;" class="demo-loadmore-list" [nzDataSource]="attachments"
          [nzItemLayout]="'horizontal'" [nzLoading]="initLoading" [nzRenderItem]="item" [nzLoadMore]="loadMore">
          <ng-template #item let-item>
            <nz-list-item [nzActions]="[delete]">
              <ng-template #delete><a (click)="deleteAttachment(item)">删除</a></ng-template>
              <nz-list-item-meta [nzDescription]="nzDescription">
              </nz-list-item-meta>
              <ng-template #nzDescription>
                <a href="{{item.fileUrl | hostUrl}}" target="_blank">{{item.fileName}}</a>
              </ng-template>
            </nz-list-item>
          </ng-template>
        </nz-list>
      </div>
    </div>
    <div class="modal-footer">
      <button nz-button type="button" [disabled]="saving" (click)="close()">
        {{l("Cancel")}}
      </button>
      <button nz-button [nzType]="'primary'" type="submit" [disabled]="!validateForm.valid||saving">
        保存
      </button>
    </div>
  </form>
</div>